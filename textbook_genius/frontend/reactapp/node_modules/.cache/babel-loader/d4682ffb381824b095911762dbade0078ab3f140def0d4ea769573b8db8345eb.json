{"ast":null,"code":"import{Button,DialogContent,TextField,Grid}from'@mui/material';import{Box,ThemeProvider}from'@mui/material';import{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CreateBookPage(props){const[isbn,setIsbn]=useState(0);// const[info,setInfo]=useState(\"\");\nconst[title,setTitle]=useState(\"\");const[author,setAuthor]=useState(\"\");const[cover,setCover]=useState(\"\");const[douban_url,setDouban]=useState(\"\");const[publisher,setPublisher]=useState(\"\");const[pubdate,setPubdate]=useState(\"\");const[error,setError]=useState(\"\");const[teacher,setTeacher]=useState(\"\");const[course,setCourse]=useState(\"\");const[departmant,setDepartment]=useState(\"\");const[school_year,setSchoolyear]=useState(\"\");const[semester,setSemester]=useState(\"\");const navigate=useNavigate();async function handleSearchButton(){let response=await fetch(\"/api/get-douban-book\"+\"?isbn=\"+isbn);if(!response.ok){setError(response.statusText);}await response.json().then(data=>{setTitle(data.title);setAuthor(data.author);setCover(data.images.small);setDouban(data.alt);setPublisher(data.publisher);setPubdate(data.pubdate);});}function handleSubmit(){console.log(\"handling submit\");const requestOption={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({book:{isbn:isbn,title:title,author:author,publisher:publisher,pubdate:pubdate,cover:cover,douban_url:douban_url},teacher:teacher,course:{course_name:course,departmant:departmant},school_year:school_year,semester:semester})};fetch(\"/api/create-book\",requestOption).then(response=>response.json()).then(data=>navigate('/book/'+data.isbn));};return/*#__PURE__*/_jsx(\"div\",{className:\"createBookPage\",children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,align:\"center\",justifyContent:\"center\",children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,item:true,xs:6,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"This is create Book\"})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,align:\"center\",children:[/*#__PURE__*/_jsx(TextField,{label:'输入ISBN号，获取书籍信息',onChange:e=>{setIsbn(e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{color:\"red\",children:error}),/*#__PURE__*/_jsx(\"item\",{children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleSearchButton,children:\"\\u641C\\u7D22\"})})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(TextField,{value:title,label:\"标题\",onChange:e=>{setTitle(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(TextField,{value:author,label:\"作者\",onChange:e=>{setAuthor(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(TextField,{value:publisher,label:\"出版社\",onChange:e=>{setPublisher(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(TextField,{value:publisher,label:\"老师\",onChange:e=>{setTeacher(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(TextField,{value:publisher,label:\"课程\",onChange:e=>{setCourse(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(TextField,{value:publisher,label:\"学部\",onChange:e=>{setDepartment(e.target.value);}})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,align:\"center\",children:[/*#__PURE__*/_jsx(TextField,{value:publisher,label:\"学年\",onChange:e=>{setSchoolyear(e.target.value);}}),/*#__PURE__*/_jsx(TextField,{value:publisher,label:\"学期\",onChange:e=>{setSemester(e.target.value);}})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleSubmit,children:\"\\u521B\\u5EFA\"})})]}),/*#__PURE__*/_jsxs(Grid,{container:true,item:true,xs:2,children:[/*#__PURE__*/_jsx(\"p\",{children:\"this is cover\"}),/*#__PURE__*/_jsx(\"img\",{src:cover})]})]})});}export default CreateBookPage;","map":{"version":3,"names":["Button","DialogContent","TextField","Grid","Box","ThemeProvider","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","CreateBookPage","props","isbn","setIsbn","title","setTitle","author","setAuthor","cover","setCover","douban_url","setDouban","publisher","setPublisher","pubdate","setPubdate","error","setError","teacher","setTeacher","course","setCourse","departmant","setDepartment","school_year","setSchoolyear","semester","setSemester","navigate","handleSearchButton","response","fetch","ok","statusText","json","then","data","images","small","alt","handleSubmit","console","log","requestOption","method","headers","body","JSON","stringify","book","course_name","className","children","container","spacing","align","justifyContent","item","xs","label","onChange","e","target","value","color","variant","onClick","src"],"sources":["D:/projects/SE-project/textbook_genius/frontend/reactapp/src/components/CreateBookPage.js"],"sourcesContent":["import {Button,DialogContent,TextField,Grid} from '@mui/material';\nimport {Box,ThemeProvider} from '@mui/material';\n\nimport { useState,useEffect } from 'react';\nimport {useNavigate} from 'react-router-dom';\n\n\nfunction CreateBookPage(props){\n\n    const[isbn,setIsbn]=useState(0);\n    // const[info,setInfo]=useState(\"\");\n    const[title,setTitle]=useState(\"\");\n    const[author,setAuthor]=useState(\"\");\n    const[cover,setCover]=useState(\"\");\n    const[douban_url,setDouban]=useState(\"\");\n    const[publisher,setPublisher]=useState(\"\");\n    const[pubdate,setPubdate]=useState(\"\");\n    const[error,setError]=useState(\"\");\n    const[teacher,setTeacher]=useState(\"\");\n    const[course,setCourse]=useState(\"\");\n    const[departmant,setDepartment]=useState(\"\");\n    const[school_year,setSchoolyear]=useState(\"\");\n    const[semester,setSemester]=useState(\"\");\n    \n    const navigate=useNavigate();\n\n    async function handleSearchButton(){\n        let response= await fetch(\"/api/get-douban-book\"+\"?isbn=\"+isbn)\n        if(!response.ok){\n            setError(response.statusText);\n        }\n        await response.json()\n        .then((data)=>{setTitle(data.title);\n            setAuthor(data.author);\n            setCover(data.images.small);\n            setDouban(data.alt);\n            setPublisher(data.publisher);\n            setPubdate(data.pubdate);\n\n                                                        })\n    }\n    function handleSubmit(){\n        console.log(\"handling submit\")\n        const requestOption={\n            method:\"POST\",\n            headers:{\"Content-Type\": \"application/json\"},\n            body:JSON.stringify({\n                book:{isbn:isbn,\n                    title:title,\n                    author:author,\n                    publisher:publisher,\n                    pubdate:pubdate,\n                    cover:cover,\n                    douban_url:douban_url},\n                teacher:teacher,\n                course:{\n                    course_name:course,\n                    departmant:departmant\n                },\n                school_year:school_year,\n                semester:semester\n            }),\n        };\n        fetch(\"/api/create-book\",requestOption)\n        .then((response)=>response.json())\n        .then((data)=>navigate('/book/'+data.isbn));\n\n    };\n\n    return(\n        <div className='createBookPage'>\n            <Grid container spacing={3} align=\"center\" justifyContent=\"center\">\n                <Grid container spacing={2} item xs={6} >\n                    <Grid item xs={12} align=\"center\">\n                        <h1>This is create Book</h1>\n                    </Grid>\n                    <Grid item xs={12} align=\"center\">\n                            <TextField label={'输入ISBN号，获取书籍信息'} onChange={(e)=>{setIsbn(e.target.value)}}></TextField>\n                            <p color='red'>{error}</p>\n                        <item>\n                            <Button variant=\"contained\" onClick={handleSearchButton}>搜索</Button>\n                        </item>\n\n                    </Grid>\n                    {/* <Grid item xs={2} align=\"center\">\n                        {/* <item> */}\n                            {/* <Button variant=\"contained\" onClick={handleSearchButton}>搜索</Button> */}\n                        {/* </item> */}\n\n                    \n                    <Grid item xs={12} align=\"center\">\n                        <TextField value={title} label={\"标题\"} onChange={(e)=>{setTitle(e.target.value)}}/>\n                    </Grid>\n                    <Grid item xs={12} align=\"center\">\n                        <TextField value={author} label={\"作者\"} onChange={(e)=>{setAuthor(e.target.value)}}/>\n                    </Grid>\n                    <Grid item xs={12} align=\"center\">\n                        <TextField value={publisher} label={\"出版社\"} onChange={(e)=>{setPublisher(e.target.value)}}/>\n                    </Grid>\n                    <Grid item xs={12} align=\"center\">\n                        <TextField value={publisher} label={\"老师\"} onChange={(e)=>{setTeacher(e.target.value)}}/>\n                    </Grid>\n                    <Grid item xs={12} align=\"center\">\n                        <TextField value={publisher} label={\"课程\"} onChange={(e)=>{setCourse(e.target.value)}}/>\n                    </Grid>\n                    <Grid item xs={12} align=\"center\">\n                        <TextField value={publisher} label={\"学部\"} onChange={(e)=>{setDepartment(e.target.value)}}/>\n                    </Grid>\n                    <Grid item xs={12} align=\"center\">\n                        <TextField value={publisher} label={\"学年\"} onChange={(e)=>{setSchoolyear(e.target.value)}}/>\n                        <TextField value={publisher} label={\"学期\"} onChange={(e)=>{setSemester(e.target.value)}}/>\n                    </Grid>\n                    <Grid item xs={12} align=\"center\">\n                        <Button variant=\"contained\" onClick={handleSubmit}>创建</Button>\n                    </Grid>\n\n                </Grid>\n                <Grid container item xs={2}>\n                    <p>this is cover</p>\n                    <img src={cover}/>\n                </Grid>\n            </Grid>\n\n        </div>\n    );\n}\n\nexport default CreateBookPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}