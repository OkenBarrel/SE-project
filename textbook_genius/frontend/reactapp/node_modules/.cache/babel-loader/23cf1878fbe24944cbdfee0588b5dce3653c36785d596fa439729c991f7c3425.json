{"ast":null,"code":"import React,{Component,useState,useEffect}from\"react\";import{Button,DialogContent,Grid,Card,Box,CardContent,CardMedia}from'@mui/material';import{useParams,useNavigate}from'react-router-dom';// import CreateBookPage from \"./CreateBookPage\";\nimport{BrowserRouter as Router,Routes,Route,Link,Redirect}from\"react-router-dom\";import CommentComponet from\"./CommentComponent\";import ScoreComponent from\"./ScoreComponet\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const Book=()=>{const{isbn}=useParams();const[title,setTitle]=useState(\"\");const[author,setAuthor]=useState(\"\");const[cover,setCover]=useState(\"\");const[douban_url,setDouban]=useState(\"\");const[publisher,setPublisher]=useState(\"\");const[pubdate,setPubdate]=useState(\"\");const navigate=useNavigate();useEffect(()=>{console.log(isbn);getBookDetails();},[]);async function getBookDetails(){let res=await fetch(\"/api/get-book\"+\"?isbn=\"+isbn);if(!res.ok){navigate(\"/\");return;}let data=await res.json();setTitle(data.title);setAuthor(data.author);setCover(data.cover);setDouban(data.douban_url);setPubdate(data.pubdate);setPublisher(data.publisher);// .then((response)=>{\n//     return response.json();\n// })\n// .then((data)=>{\n//     setTitle(data.title)\n// })\n}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"This is Book \",title]}),/*#__PURE__*/_jsxs(Card,{variant:\"outlined\",align:\"center\",jutifyContent:\"center\",sx:{display:\"flex-start\",maxWidth:700,maxHeight:400},children:[/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexDirection:'column'},children:/*#__PURE__*/_jsx(CardContent,{sx:{flex:'1 0 auto'},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1,item:true,xs:12,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',flexDirection:'row'},children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u6807\\u9898\\uFF1A\"}),/*#__PURE__*/_jsx(\"p\",{children:title})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',flexDirection:'row'},children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u4F5C\\u8005\\uFF1A\"}),/*#__PURE__*/_jsx(\"p\",{children:author})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',flexDirection:'row'},children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u51FA\\u7248\\u793E\\uFF1A\"}),/*#__PURE__*/_jsx(\"p\",{children:publisher})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',flexDirection:'row'},children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u51FA\\u7248\\u65E5\\u671F\\uFF1A\"}),/*#__PURE__*/_jsx(\"p\",{children:pubdate})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",to:\"./update\",component:Link,children:\"\\u4FEE\\u6539\\u4E66\\u7C4D\\u4FE1\\u606F\"})})]})})}),/*#__PURE__*/_jsx(CardMedia,{component:\"img\",sx:{maxWidth:'100',// maxHeight: '50%',\n// width: '100%',\n// height: '100%',\nobjectFit:'contain'// or 'scale-down', 'fill', 'cover'\n},image:cover,title:\"cover\"})]}),/*#__PURE__*/_jsxs(Card,{variant:\"outlined\",align:\"center\",jutifyContent:\"flex-end\",sx:{display:\"flex-end\",maxWidth:500,maxHeight:400},children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",component:Link,children:\"\\u5B54\\u592B\\u5B50\\u65E7\\u4E66\\u7F51\\u8D2D\\u4E70\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",component:Link,children:\"\\u5F53\\u5F53\\u7F51\\u8D2D\\u4E70\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",component:Link,children:\"\\u4E2D\\u56FE\\u7F51\\u8D2D\\u4E70\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",component:Link,children:\"\\u591A\\u6293\\u9C7C\\u8D2D\\u4E70\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",component:Link,children:\"\\u65E7\\u4E66\\u8857\\u8D2D\\u4E70\"})]}),/*#__PURE__*/_jsx(CommentComponet,{isbn:isbn})]});};export default Book;","map":{"version":3,"names":["React","Component","useState","useEffect","Button","DialogContent","Grid","Card","Box","CardContent","CardMedia","useParams","useNavigate","BrowserRouter","Router","Routes","Route","Link","Redirect","CommentComponet","ScoreComponent","jsxs","_jsxs","jsx","_jsx","Book","isbn","title","setTitle","author","setAuthor","cover","setCover","douban_url","setDouban","publisher","setPublisher","pubdate","setPubdate","navigate","console","log","getBookDetails","res","fetch","ok","data","json","children","variant","align","jutifyContent","sx","display","maxWidth","maxHeight","flexDirection","flex","container","spacing","item","xs","alignItems","to","component","objectFit","image"],"sources":["D:/projects/SE-project/textbook_genius/frontend/reactapp/src/components/Book.js"],"sourcesContent":["import React, { Component, useState,useEffect } from \"react\";\nimport {Button,DialogContent,Grid,Card,Box, CardContent,CardMedia} from '@mui/material';\nimport { useParams, useNavigate } from 'react-router-dom';\n// import CreateBookPage from \"./CreateBookPage\";\nimport {\n    BrowserRouter as Router,\n    Routes,\n    Route,\n    Link,\n    Redirect\n} from \"react-router-dom\";\nimport CommentComponet from \"./CommentComponent\";\nimport ScoreComponent from \"./ScoreComponet\";\n\nconst Book=()=>{\n    const { isbn } = useParams();\n    const [title,setTitle]=useState(\"\");\n    const[author,setAuthor]=useState(\"\");\n    const[cover,setCover]=useState(\"\");\n    const[douban_url,setDouban]=useState(\"\")\n    const[publisher,setPublisher]=useState(\"\")\n    const[pubdate,setPubdate]=useState(\"\")\n    const navigate=useNavigate();\n\n    useEffect(() => {\n        console.log(isbn);\n        getBookDetails();\n      }, []);\n\n    async function getBookDetails(){\n        let res=await fetch(\"/api/get-book\"+\"?isbn=\"+isbn)\n        if(!res.ok){\n            navigate(\"/\");\n            return;\n        }\n        let data=await res.json()\n        setTitle(data.title);\n        setAuthor(data.author);\n        setCover(data.cover);\n        setDouban(data.douban_url);\n        setPubdate(data.pubdate);\n        setPublisher(data.publisher);\n        \n        // .then((response)=>{\n        //     return response.json();\n        // })\n        // .then((data)=>{\n        //     setTitle(data.title)\n        // })\n    }\n\n    return(\n        <div>\n            <h2>This is Book {title}</h2>\n            <Card variant=\"outlined\"  align=\"center\" jutifyContent=\"center\" sx={{display:\"flex-start\",maxWidth: 700,maxHeight: 400}}>\n                <Box sx={{ display: 'flex', flexDirection: 'column' }}>\n                    <CardContent sx={{ flex: '1 0 auto' }}>\n                    {/* <Grid container spacing={3} align=\"center\" justifyContent={\"center\"}> */}\n                        <Grid container spacing={1} item xs={12} >\n                            <Grid item xs={12}>\n                                <Box sx={{ display: 'flex', alignItems: 'center',flexDirection:'row' }}>\n                                    <p >标题：</p>\n                                    <p >{title}</p>\n                                </Box>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <Box sx={{ display: 'flex', alignItems: 'center',flexDirection:'row' }}>\n                                    <p>作者：</p>\n                                    <p>{author}</p>\n                                </Box>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <Box sx={{ display: 'flex', alignItems: 'center',flexDirection:'row' }}>\n                                    <p>出版社：</p>\n                                    <p>{publisher}</p>\n                                </Box>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <Box sx={{ display: 'flex', alignItems: 'center',flexDirection:'row' }}>\n                                    <p>出版日期：</p>\n                                    <p>{pubdate}</p>\n                                </Box>\n                            </Grid>\n                            <Grid item xs={12} align=\"center\">\n                                <Button variant='contained' to=\"./update\" component={Link}>修改书籍信息</Button>\n                            </Grid>\n                        {/* </Grid> */}\n\n                        {/* <Grid item xs={6}>\n                            <Box height={200} width={200} sx={{ p: 2, border: '1px dashed grey' }}>\n                                <img src={cover}/>\n                            </Box>\n                        </Grid> */}\n                    </Grid>\n                    </CardContent>\n                </Box>\n                <CardMedia\n                    component=\"img\"\n                    sx={{ \n                        maxWidth: '100',\n                        // maxHeight: '50%',\n                        // width: '100%',\n                        // height: '100%',\n                        objectFit: 'contain' // or 'scale-down', 'fill', 'cover'\n                      }}\n                    image={cover}\n                    title=\"cover\"\n                />\n                {/*<Box sx={{ display: 'flex', flexDirection: 'column' }}>\n                    <Button variant=\"contained\" component={Link}>孔夫子旧书网购买</Button>\n                    <Button variant=\"contained\" component={Link}>当当网购买</Button>\n                    <Button variant=\"contained\" component={Link}>中图网购买</Button>\n                    <Button variant=\"contained\" component={Link}>多抓鱼购买</Button>\n                    <Button variant=\"contained\" component={Link}>旧书街购买</Button>\n                </Box>*/}\n            </Card>\n            <Card variant=\"outlined\" align=\"center\" jutifyContent=\"flex-end\" sx={{display:\"flex-end\",maxWidth: 500,maxHeight: 400}}>\n                <Button variant=\"contained\" component={Link}>孔夫子旧书网购买</Button>\n                <Button variant=\"contained\" component={Link}>当当网购买</Button>\n                <Button variant=\"contained\" component={Link}>中图网购买</Button>\n                <Button variant=\"contained\" component={Link}>多抓鱼购买</Button>\n                <Button variant=\"contained\" component={Link}>旧书街购买</Button>\n            </Card>\n            \n            {/* <Card> */}\n            <CommentComponet isbn={isbn}/>\n\n            {/* </Card> */}\n            \n            \n        </div>\n    );\n\n}\nexport default Book;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}