{"ast":null,"code":"import{Button,DialogContent,TextField,Grid}from'@mui/material';import{Box,ThemeProvider}from'@mui/material';import{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UpdateBookPage(props){const{isbn}=useParams();const[title,setTitle]=useState(\"\");const[author,setAuthor]=useState(\"\");const[publisher,setPublisher]=useState(\"\");const[pubdate,setPubdate]=useState(\"\");const[cover,setCover]=useState(\"\");const[douban_url,setDouban]=useState(\"\");useEffect(()=>{getBookDetails();},[]);async function getBookDetails(){let res=await fetch(\"/api/get-book\"+\"?isbn=\"+isbn);if(!res.ok){navigate(\"/\");}let data=await res.json();setTitle(data.title);setAuthor(data.author);setCover(data.cover);setDouban(data.douban_url);setPubdate(data.pubdate);setPublisher(data.publisher);}{/*fetch(\"/api/get-book\",requestOption)*/}{/*async function handleGetNow(){\r\n       \r\n    }*/}async function handleSubmit(){console.log(\"handling submit\");const requestOption={method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({book:{title:title,author:author,publisher:publisher,pubdate:pubdate,cover:cover,douban_url:douban_url}})};fetch(\"/api/update-book\",requestOption).then(response=>response.json());}return/*#__PURE__*/_jsx(\"div\",{className:\"updateBookPage\",children:/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,align:\"center\",justifyContent:\"center\",children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,item:true,xs:6,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"This is update Book\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(TextField,{value:isbn,label:\"ISBN\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(TextField,{value:title,label:\"书名\",onChange:e=>{setTitle(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(TextField,{value:author,label:\"作者\",onChange:e=>{setAuthor(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(TextField,{value:publisher,label:\"出版社\",onChange:e=>{setPublisher(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(TextField,{value:pubdate,label:\"出版日期\",onChange:e=>{setPubdate(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(TextField,{value:douban_url,label:\"豆瓣链接\",onChange:e=>{setDouban(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleSubmit,children:\"\\u4FEE\\u6539\"})})]})})});}export default UpdateBookPage;","map":{"version":3,"names":["Button","DialogContent","TextField","Grid","Box","ThemeProvider","useState","useEffect","useParams","jsx","_jsx","jsxs","_jsxs","UpdateBookPage","props","isbn","title","setTitle","author","setAuthor","publisher","setPublisher","pubdate","setPubdate","cover","setCover","douban_url","setDouban","getBookDetails","res","fetch","ok","navigate","data","json","handleSubmit","console","log","requestOption","method","headers","body","JSON","stringify","book","then","response","className","children","container","spacing","align","justifyContent","item","xs","value","label","onChange","e","target","variant","onClick"],"sources":["D:/projects/SE-project/textbook_genius/frontend/reactapp/src/components/UpdateBookPage.js"],"sourcesContent":["import {Button,DialogContent,TextField,Grid} from '@mui/material';\r\nimport {Box,ThemeProvider} from '@mui/material';\r\nimport { useState,useEffect } from 'react';\r\nimport {useParams} from 'react-router-dom';\r\n\r\nfunction UpdateBookPage(props){\r\n    const { isbn } = useParams();\r\n    const[title,setTitle]=useState(\"\");\r\n    const[author,setAuthor]=useState(\"\");\r\n    const[publisher,setPublisher]=useState(\"\");\r\n    const[pubdate,setPubdate]=useState(\"\");\r\n    const[cover,setCover]=useState(\"\");\r\n    const[douban_url,setDouban]=useState(\"\");\r\n\r\n    useEffect(() => {\r\n        getBookDetails();\r\n      }, []);\r\n\r\n    async function getBookDetails(){\r\n        let res=await fetch(\"/api/get-book\"+\"?isbn=\"+isbn)\r\n        if(!res.ok){\r\n            navigate(\"/\");\r\n        }\r\n        let data=await res.json()\r\n        setTitle(data.title);\r\n        setAuthor(data.author);\r\n        setCover(data.cover);\r\n        setDouban(data.douban_url);\r\n        setPubdate(data.pubdate);\r\n        setPublisher(data.publisher);\r\n    }\r\n\r\n    {/*fetch(\"/api/get-book\",requestOption)*/}\r\n\r\n\r\n    {/*async function handleGetNow(){\r\n       \r\n    }*/}\r\n\r\n\r\n    async function handleSubmit(){\r\n        console.log(\"handling submit\")\r\n        const requestOption={\r\n            method:\"PATCH\",\r\n            headers:{\"Content-Type\": \"application/json\"},\r\n            body:JSON.stringify({\r\n                book:{\r\n                    title:title,\r\n                    author:author,\r\n                    publisher:publisher,\r\n                    pubdate:pubdate,\r\n                    cover:cover,\r\n                    douban_url:douban_url\r\n                },\r\n            }),\r\n        };\r\n        fetch(\"/api/update-book\",requestOption)\r\n        .then((response)=>response.json())\r\n    }\r\n\r\n    return(\r\n        <div className='updateBookPage'>\r\n            <Grid container spacing={3} align=\"center\" justifyContent=\"center\">\r\n                <Grid container spacing={2} item xs={6}>\r\n                    <Grid item xs={12} align=\"center\">\r\n                        <h1>This is update Book</h1>\r\n                    </Grid>  \r\n                    <Grid item xs={12} align=\"center\">\r\n                        <TextField value={isbn} label={\"ISBN\"}/>    \r\n                        {/*<Button variant=\"contained\" onClick={handleGetNow}>查找当前信息</Button>*/}\r\n                    </Grid>\r\n                    <Grid item xs={12} align=\"center\">\r\n                        <TextField value={title} label={\"书名\"} onChange={(e)=>{setTitle(e.target.value)}}/>    \r\n                    </Grid>\r\n                    <Grid item xs={12} align=\"center\">\r\n                        <TextField value={author} label={\"作者\"} onChange={(e)=>{setAuthor(e.target.value)}}/>    \r\n                    </Grid>\r\n                    <Grid item xs={12} align=\"center\">\r\n                        <TextField value={publisher} label={\"出版社\"} onChange={(e)=>{setPublisher(e.target.value)}}/>    \r\n                    </Grid>\r\n                    <Grid item xs={12} align=\"center\">\r\n                        <TextField value={pubdate} label={\"出版日期\"} onChange={(e)=>{setPubdate(e.target.value)}}/>    \r\n                    </Grid>\r\n                    <Grid item xs={12} align=\"center\">\r\n                        <TextField value={douban_url} label={\"豆瓣链接\"} onChange={(e)=>{setDouban(e.target.value)}}/>    \r\n                    </Grid>\r\n                    <Grid item xs={12} align=\"center\">\r\n                        <Button variant=\"contained\" onClick={handleSubmit}>修改</Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n        </div>\r\n    );\r\n\r\n}\r\nexport default UpdateBookPage"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}