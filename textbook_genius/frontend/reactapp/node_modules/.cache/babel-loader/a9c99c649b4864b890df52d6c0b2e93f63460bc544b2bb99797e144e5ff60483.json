{"ast":null,"code":"import{Button,DialogContent,TextField,Grid}from'@mui/material';import{Box,ThemeProvider}from'@mui/material';import{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CreateBookPage(props){const[isbn,setIsbn]=useState(0);// const[info,setInfo]=useState(\"\");\nconst[title,setTitle]=useState(\"\");const[author,setAuthor]=useState(\"\");const[cover,setCover]=useState(\"\");const[douban_url,setDouban]=useState(\"\");const[publisher,setPublisher]=useState(\"\");const[pubdate,setPubdate]=useState(\"\");async function handleSearchButton(){let response=await fetch(\"/api/get-douban-book\"+\"?isbn=\"+isbn);console.log(await response.json().then(data=>{setTitle(data.title);setAuthor(data.author);setCover(data.images.small);setDouban(data.alt);setPublisher(data.publisher);setPubdate(data.pubdate);}));}function handleSubmit(){const requestOpt={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({isbn:isbn,title:title,author:author,publisher:publisher,pubdate:pubdate,douban_url:douban_url,cover:cover})};fetch(\"api/create-book\",requestOpt).then(response=>response.json());// .then((data)=>)\n}return/*#__PURE__*/_jsx(\"div\",{className:\"createBookPage\",children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,align:\"center\",justifyContent:\"center\",children:[/*#__PURE__*/_jsxs(Grid,{container:true,item:true,xs:6,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"This is create Book\"})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,align:\"center\",children:[/*#__PURE__*/_jsx(TextField,{label:'输入ISBN号，获取书籍信息',onChange:e=>{setIsbn(e.target.value);}}),/*#__PURE__*/_jsx(\"item\",{children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleSearchButton,children:\"\\u641C\\u7D22\"})})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(TextField,{value:title,label:\"标题\",onChange:e=>{setTitle(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(TextField,{value:author,label:\"作者\",onChange:e=>{setAuthor(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(TextField,{value:publisher,label:\"出版社\",onChange:e=>{setPublisher(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleSubmit,children:\"\\u521B\\u5EFA\"})})]}),/*#__PURE__*/_jsxs(Grid,{container:true,item:true,xs:2,children:[/*#__PURE__*/_jsx(\"p\",{children:\"this is cover\"}),/*#__PURE__*/_jsx(\"img\",{src:cover})]})]})});}export default CreateBookPage;","map":{"version":3,"names":["Button","DialogContent","TextField","Grid","Box","ThemeProvider","useState","useEffect","jsx","_jsx","jsxs","_jsxs","CreateBookPage","props","isbn","setIsbn","title","setTitle","author","setAuthor","cover","setCover","douban_url","setDouban","publisher","setPublisher","pubdate","setPubdate","handleSearchButton","response","fetch","console","log","json","then","data","images","small","alt","handleSubmit","requestOpt","method","headers","body","JSON","stringify","className","children","container","spacing","align","justifyContent","item","xs","label","onChange","e","target","value","variant","onClick","src"],"sources":["D:/projects/SE-project/textbook_genius/frontend/reactapp/src/components/createBook_box.js"],"sourcesContent":["import {Button,DialogContent,TextField,Grid} from '@mui/material';\r\nimport {Box,ThemeProvider} from '@mui/material';\r\n\r\nimport { useState,useEffect } from 'react';\r\n\r\n\r\nfunction CreateBookPage(props){\r\n\r\n    const[isbn,setIsbn]=useState(0);\r\n    // const[info,setInfo]=useState(\"\");\r\n    const[title,setTitle]=useState(\"\");\r\n    const[author,setAuthor]=useState(\"\");\r\n    const[cover,setCover]=useState(\"\");\r\n    const[douban_url,setDouban]=useState(\"\")\r\n    const[publisher,setPublisher]=useState(\"\")\r\n    const[pubdate,setPubdate]=useState(\"\")\r\n\r\n    async function handleSearchButton(){\r\n        let response= await fetch(\"/api/get-douban-book\"+\"?isbn=\"+isbn)\r\n        console.log(await response.json()\r\n        .then((data)=>{setTitle(data.title);\r\n            setAuthor(data.author);\r\n            setCover(data.images.small);\r\n            setDouban(data.alt);\r\n            setPublisher(data.publisher);\r\n            setPubdate(data.pubdate);\r\n\r\n                                                        }))\r\n    }\r\n    function handleSubmit(){\r\n        const requestOpt={\r\n            method:\"POST\",\r\n            headers:{\"Content-Type\": \"application/json\"},\r\n            body:JSON.stringify({\r\n                isbn:isbn,\r\n                title:title,\r\n                author:author,\r\n                publisher:publisher,\r\n                pubdate:pubdate,\r\n                douban_url:douban_url,\r\n                cover:cover\r\n\r\n            })\r\n        }\r\n        fetch(\"api/create-book\",requestOpt)\r\n        .then((response)=>response.json())\r\n        // .then((data)=>)\r\n\r\n    }\r\n    return(\r\n        <div className='createBookPage'>\r\n            <Grid container spacing={3} align=\"center\" justifyContent=\"center\">\r\n                <Grid container item xs={6} >\r\n                    <Grid item xs={12} align=\"center\">\r\n                        <h1>This is create Book</h1>\r\n                    </Grid>\r\n                    <Grid item xs={12} align=\"center\">\r\n                            <TextField label={'输入ISBN号，获取书籍信息'} onChange={(e)=>{setIsbn(e.target.value)}}></TextField>\r\n                        <item>\r\n                            <Button variant=\"contained\" onClick={handleSearchButton}>搜索</Button>\r\n                        </item>\r\n\r\n                    </Grid>\r\n                    {/* <Grid item xs={2} align=\"center\">\r\n                        {/* <item> */}\r\n                            {/* <Button variant=\"contained\" onClick={handleSearchButton}>搜索</Button> */}\r\n                        {/* </item> */}\r\n\r\n                    \r\n                    <Grid item xs={12} align=\"center\">\r\n                        <TextField value={title} label={\"标题\"} onChange={(e)=>{setTitle(e.target.value)}}/>\r\n                    </Grid>\r\n                    <Grid item xs={12} align=\"center\">\r\n                        <TextField value={author} label={\"作者\"} onChange={(e)=>{setAuthor(e.target.value)}}/>\r\n                    </Grid>\r\n                    <Grid item xs={12} align=\"center\">\r\n                        <TextField value={publisher} label={\"出版社\"} onChange={(e)=>{setPublisher(e.target.value)}}/>\r\n                    </Grid>\r\n                    <Grid item xs={12} align=\"center\">\r\n                        <Button variant=\"contained\" onClick={handleSubmit}>创建</Button>\r\n                    </Grid>\r\n\r\n                </Grid>\r\n                <Grid container item xs={2}>\r\n                    <p>this is cover</p>\r\n                    <img src={cover}/>\r\n                </Grid>\r\n            </Grid>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CreateBookPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}